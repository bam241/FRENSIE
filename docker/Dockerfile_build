#!/bin/bash

docker run -v "$DATAPATH:/data" -v "$PWD:/home/docker/FRENSIE/" frensie/frensie-deps bash -c "cmake -D CMAKE_INSTALL_PREFIX:PATH=/home/docker/opt/frensie \
          -D FRENSIE_ENABLE_DBC:BOOL=ON \
          -D CMAKE_BUILD_TYPE:STRING=RELEASE \
          -D CMAKE_TIMING_VERBOSE:BOOL=ON \
          -D FRENSIE_ENABLE_MOAB:BOOL=ON  -D MOAB_PREFIX:PATH=/home/docker/opt/moab/ -D MOAB_USE_EIGEN:BOOL=ON\
          -D FRENSIE_ENABLE_DAGMC:BOOL=ON -D DAGMC_PREFIX:PATH=/home/docker/opt/dagmc \
          -D  XSDIR:PATH=/data \
        ../FRENSIE; \
        make -j 8;
        make test"



cmake \
    -D CMAKE_INSTALL_PREFIX:PATH="/home/docker/opt/FRENSIE" \
    -D CMAKE_BUILD_TYPE:STRING=RELEASE \
    -D CMAKE_VERBOSE_CONFIGURE:BOOL=OFF \
    -D CMAKE_VERBOSE_MAKEFILE:BOOL=ON \
    -D FRENSIE_ENABLE_DBC:BOOL=ON \
    -D FRENSIE_ENABLE_COLOR_OUTPUT:BOOL=ON \
    -D FRENSIE_ENABLE_OPENMP:BOOL=ON \
    -D FRENSIE_ENABLE_MPI:BOOL=ON \
    -D FRENSIE_ENABLE_MOAB:BOOL=ON \
    -D FRENSIE_ENABLE_DAGMC:BOOL=ON \
    -D FRENSIE_ENABLE_ROOT:BOOL=ON \
    -D FRENSIE_ENABLE_PROFILING:BOOL=OFF \
    -D FRENSIE_ENABLE_COVERAGE:BOOL=OFF \
    -D FRENSIE_ENABLE_EXPLICIT_TEMPLATE_INST:BOOL=ON \
    -D ROOT_PREFIX:PATH="/home/docker/opt/root" \
    -D MOAB_PREFIX:PATH="/home/docker/opt/moab" \
    -D DAGMC_PREFIX:PATH="/home/docker/opt/dagmc" \
    -D HDF5_PREFIX:PATH="/home/docker/opt/hdf5" \
    -D BOOST_PREFIX:PATH="/home/docker/opt/boost" \
    -D MPI_PREFIX:PATH="/home/docker/opt/mpi" \
    -D SWIG_PREFIX:PATH="/home/docker/opt/swig" \
    -D FRENSIE_ENABLE_DASHBOARD_CLIENT:BOOL=ON \
    -D XSDIR:PATH="/data/xsdir_mcnp6.1_endfb-7.1" \
    -D BUILDNAME_PREFIX:STRING="Ubuntu-18.04" \
    ../FRENSIE

cmake \
    -D CMAKE_INSTALL_PREFIX:PATH="/home/docker/opt/FRENSIE" \
    -D CMAKE_BUILD_TYPE:STRING=RELEASE \
    -D CMAKE_VERBOSE_CONFIGURE:BOOL=OFF \
    -D CMAKE_VERBOSE_MAKEFILE:BOOL=ON \
    -D FRENSIE_ENABLE_DBC:BOOL=ON \
    -D FRENSIE_ENABLE_COLOR_OUTPUT:BOOL=ON \
    -D FRENSIE_ENABLE_OPENMP:BOOL=ON \
    -D FRENSIE_ENABLE_MOAB:BOOL=ON \
    -D FRENSIE_ENABLE_DAGMC:BOOL=ON \
    -D FRENSIE_ENABLE_PROFILING:BOOL=OFF \
    -D FRENSIE_ENABLE_COVERAGE:BOOL=OFF \
    -D FRENSIE_ENABLE_EXPLICIT_TEMPLATE_INST:BOOL=ON \
    -D MOAB_PREFIX:PATH="/home/docker/opt/moab" \
    -D DAGMC_PREFIX:PATH="/home/docker/opt/dagmc" \
    -D HDF5_PREFIX:PATH="/home/docker/opt/hdf5" \
    -D BOOST_PREFIX:PATH="/home/docker/opt/boost" \
    -D SWIG_PREFIX:PATH="/home/docker/opt/swig" \
    -D FRENSIE_ENABLE_DASHBOARD_CLIENT:BOOL=ON \
    -D XSDIR:PATH="/data/xsdir_mcnp6.1_endfb-7.1" \
    -D BUILDNAME_PREFIX:STRING="Ubuntu-18.04" \
    ../FRENSIE

cmake \
    -D CMAKE_INSTALL_PREFIX:PATH="/home/docker/opt/FRENSIE" \
    -D CMAKE_BUILD_TYPE:STRING=DEBUG \
    -D CMAKE_VERBOSE_CONFIGURE:BOOL=OFF \
    -D CMAKE_VERBOSE_MAKEFILE:BOOL=ON \
    -D FRENSIE_ENABLE_DBC:BOOL=ON \
    -D FRENSIE_ENABLE_COLOR_OUTPUT:BOOL=ON \
    -D FRENSIE_ENABLE_OPENMP:BOOL=ON \
    -D FRENSIE_ENABLE_MOAB:BOOL=ON \
    -D FRENSIE_ENABLE_DAGMC:BOOL=ON \
    -D FRENSIE_ENABLE_PROFILING:BOOL=OFF \
    -D FRENSIE_ENABLE_COVERAGE:BOOL=OFF \
    -D FRENSIE_ENABLE_EXPLICIT_TEMPLATE_INST:BOOL=ON \
    -D ENABLE_SWIG_SUPPORT:BOOL=ON \
    -D MOAB_PREFIX:PATH="/home/docker/opt/moab" \
    -D DAGMC_PREFIX:PATH="/home/docker/opt/dagmc" \
    -D HDF5_PREFIX:PATH="/usr/lib/x86_64-linux-gnu/hdf5/serial " \
    -D BOOST_ROOT:PATH="/usr/lib/x86_64-linux-gnu" \
    -D BOOST_INCLUDEDIR:PATH="/usr/include/boost/" \
    -D FRENSIE_ENABLE_DASHBOARD_CLIENT:BOOL=ON \
    -D XSDIR:PATH="/data/xsdir_mcnp6.1_endfb-7.1" \
    -D BUILDNAME_PREFIX:STRING="Ubuntu-18.04" \
    ../FRENSIE